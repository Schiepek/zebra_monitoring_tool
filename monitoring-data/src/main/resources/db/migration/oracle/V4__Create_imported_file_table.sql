CREATE TABLE IMPORTED_FILE
  (
    ID              NUMBER PRIMARY KEY,
    CLIENT          VARCHAR(255) NOT NULL,
    ENVIRONMENT     VARCHAR(255) NOT NULL,
    STATUS          VARCHAR(255) CHECK( STATUS IN ('new','done','error') ),
    IMPORT_DATETIME TIMESTAMP,
    FILENAME        VARCHAR(255) NOT NULL,
    CONSTRAINT UNIQUE_FILE UNIQUE (CLIENT, ENVIRONMENT, FILENAME)
  );

CREATE sequence S_IMPORTED_FILE start with 1 increment BY 1 nomaxvalue;
CREATE TRIGGER T_IMPORTED_FILE before
  INSERT ON imported_file FOR EACH row BEGIN
  SELECT S_IMPORTED_FILE.nextval INTO :new.id FROM dual;
END;
/